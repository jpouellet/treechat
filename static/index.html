<!DOCTYPE html>
<html>
<head>
	<title>TreeChat Beta</title>

	<script type="text/javascript" src="/socket.io/socket.io.js"></script>
	<script type="text/javascript">

/*
abc
123
foo
bar	baz
yes	no
hello
world	whats up	this is dog

{
	"message": "content",
	"sender": "me",
	...
	"children": [
		... more of these ...
	]
}
*/

window.addEventListener('load', function() {
	var data = [[[[[],[]]],[],[[[],[]]]]];
	var tree_area = document.getElementById('tree');
var from = false;
	function buildTree(array, elem) {
from = !from;
		var node = document.createElement('div');
		node.className = 'node';
		elem.appendChild(node);

		var msg = document.createElement('div');
		msg.className = 'msg ' + (from ? 'you' : 'them');
		node.appendChild(msg);

		var who = document.createElement('div');
		who.textContent = from ? 'You' : 'Them';
		who.className = 'who';
		msg.appendChild(who);

		var content = document.createElement('div');
		content.className = 'content';
		msg.appendChild(content);
		function line(text) {
			var line = document.createElement('p');
			line.textContent = text;
			content.appendChild(line);
		}
		line('foo');
		line('bar');
		line('baz');

		if (array.length > 0) {
			var row = document.createElement('div');
			row.className = 'row';
			elem.appendChild(row);

			array.forEach(function(child) {
				var col = document.createElement('div');
				col.className = 'col';
				row.appendChild(col);

				buildTree(child, col);
			});
		}
	}
	var col = document.createElement('div');
	col.className = 'col';
	tree_area.appendChild(col);
	buildTree(data, col);
});
	</script>

	<style type="text/css">
		* {
			margin: 0px;
			padding: 0px;
			box-sizing: border-box;
			font-family: arial, helvetica, sans-serif;
		}
		body {
			background-color: #ccc;
			background-image: url("/woven.png");
		}
		#tree {
			position: fixed;
			top: 40px;
			bottom: 0px;
			left: 0px;
			right: 0px;
			margin-right: 200px;
			padding: 10px;
			padding-top: 0px;
			overflow: auto;
			background-color: #f8f8f8;
			background-image: url("/noise.png");
			box-shadow: 1px 0px 35px 0px rgba(0,0,0,0.75);
		}
		#tree .col {
			display: inline-block;
			vertical-align: top;
		}
		#tree .row {
			display: inline-block;
			white-space: nowrap;
		}

		/* vertical lines */
		#tree .node {
			background: linear-gradient(#aaa,#aaa);
			background-size: 1px 100%;
			background-repeat: no-repeat;
			background-position: center top;
			background-clip: border-box;
		}
		#tree .node:last-child {
			background-size: 1px 50%;
		}

		/* horizontal lines */
		#tree .col {
			background: linear-gradient(#aaa,#aaa);
			background-size: 100% 1px;
			background-repeat: no-repeat;
			background-position: center top;
			background-clip: border-box;
		}
		#tree .col:first-child {
			background-size: 100% 1px;
			background-position: 125px top;
		}
		#tree .col:last-child {
			background-size: 125px 1px;
			background-position: left top;
		}
		#tree .col:first-child:last-child {
			background: none;
		}

		#tree .node {
			width: 250px;
			padding: 8px;
		}
		#tree .node > .msg {
			border-radius: 3px;
			font-size:12px;
			text-decoration:none;
			display: flex;
		}
		#tree .node > .msg.you {
			border:1px solid #bee1fa;
			background-color: #f2f9fe;
			background-image: linear-gradient(to bottom, #f2f9fe, #d6f0fd);
		}
		#tree .node > .msg.them {
			border:1px solid #d7dada;
			background-color: #f4f5f5;
			background-image: linear-gradient(to bottom, #f4f5f5, #dfdddd);
border:1px solid #bee1fa;
background-color: #f2f9fe;
background-image: linear-gradient(to bottom, #f2f9fe, #d6f0fd);
border:1px solid #96f0ff;
background-color: #cef8ff;
background-image: linear-gradient(to bottom, #cef8ff, #7fe0f8);
		}
		#tree .node > .msg > .who {
			display: inline-block;
			flex: 1;
			padding: 5px;
			overflow: hidden;
			text-overflow: ellipsis;
			border-right: inherit;
		}
		#tree .node > .msg > .content {
			padding: 4px;
			flex: 3;
		}

		#stack {
			margin-top: 40px;
			float: right;
			width: 200px;
			}
		#stack p {
			margin: 10px;
			padding: 10px;
			border:1px solid #25729a;
			border-radius: 5px;
			background: #248;
			background-color: #3093c7;
			background-image: linear-gradient(to bottom, #3093c7, #1c5a85);
			font-size:12px;
			color: white;
			text-shadow: -1px -1px 0 rgba(0,0,0,0.3);
			text-decoration:none;
		}
		#stack p:hover {
			border:1px solid #1c5675;
 			background-color: #26759e;
 			background-image: linear-gradient(to bottom, #26759e, #133d5b);
 		}

 		header {
 			position: fixed;
 			top: 0px;
 			left: 0px;
 			right: 0px;
 			display: flex;
 			height: 40px;
 			background-image: linear-gradient(to bottom, #555, #333);
 		}
 		header h1 {
 			flex 10;
 			font-size: 30px;
 			margin: auto;
 			color: white;
 		}
	</style>
</head>
<body>
	<header>
		<img src="/logo-large.png" />
		<h1>TreeChat</h1>
	</header>
	<div id="tree">
	</div>
	<div id="stack">
		<p>Rocks</p>
		<p>Rocks</p>
		<p>Rocks</p>
	</div>
</body>
</html>
